{"version":3,"file":"gonzales.js","sources":["../node_modules/mitt/dist/mitt.es.js","../src/gonzales.js"],"sourcesContent":["//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n// An array of all currently registered event handlers for a type\n                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberof mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nexport default mitt;\n//# sourceMappingURL=mitt.es.js.map\n","import mitt from 'mitt'\n\nclass Gonzales {\n\n    /**\n        --- CORE ---\n    **/\n\n    constructor (selector, options = {}) {\n        this.options = {\n            hideDefault: options.hideDefault || true\n        }\n\n        this.selector = typeof selector === 'string'\n            ? document.querySelector(selector)\n            : selector\n\n        this.el = this.selector.cloneNode(true)\n\n        this.selector.parentNode.removeChild(this.selector)\n\n        this.emitter = mitt()\n\n        this.node = false\n        this.defaultStyle = false\n        this.posX = -9999\n        this.posY = -9999\n\n        return this\n    }\n\n    /**\n        --- GLOBAL HELPERS ---\n    **/\n\n    _throttle (callback, delay, scope) {\n        let last\n        let timer\n\n        return function () {\n            let context = scope || this\n            let now = +new Date()\n            let args = arguments\n\n            if (last && now < last + delay) {\n                clearTimeout(timer)\n                timer = setTimeout(() => {\n                    last = now\n                    callback.apply(context, args)\n                }, delay)\n            } else {\n                last = now\n                callback.apply(context, args)\n            }\n        }\n    }\n\n    /**\n        --- API ---\n    **/\n\n    activate () {\n        this._showNode()\n    }\n\n    deactivate () {\n        this._hideNode()\n    }\n\n    destroy () {\n        this._destroyNode()\n    }\n\n    on (...args) { return this.emitter.on(...args) }\n    off (...args) { return this.emitter.off(...args) }\n\n    /**\n        --- FUNCTIONS ---\n    **/\n\n    _createNode () {\n        if (!this.node) {\n            this.node = document.createElement('div')\n            this.node.setAttribute('style', 'display:none;position:absolute;z-index:9999;left:' + this.posX + 'px;top:' + this.posY + 'px;width:0;height:0;overflow:visible;pointer-events:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;')\n            this.node.appendChild(this.el)\n            document.body.appendChild(this.node)\n        }\n    }\n\n    _destroyNode () {\n        this._hideNode()\n\n        if (this.node) {\n            this.node.parentNode.removeChild(this.node)\n            this.node = false\n        }\n    }\n\n    _showNode () {\n        this._createNode()\n\n        if (this.node) {\n            this.node.style.display = 'block'\n            this._bindEvents()\n            this._hideDefault()\n        }\n    }\n\n    _hideNode () {\n        if (this.node) {\n            this.node.style.display = 'none'\n            this._unbindEvents()\n            this._showDefault()\n        }\n    }\n\n    _hideDefault () {\n        if (this.options.hideDefault && !this._defaultStyleExists()) {\n            this.defaultStyle = document.createElement('style')\n            this.defaultStyle.type = 'text/css'\n            this.defaultStyle.innerHTML = '* { cursor: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=\"), auto !important; }'\n            document.body.appendChild(this.defaultStyle)\n            window.gonzalesjs = true\n        }\n    }\n\n    _showDefault () {\n        if (this.defaultStyle) {\n            this.defaultStyle.parentNode.removeChild(this.defaultStyle)\n            this.defaultStyle = false\n            window.gonzalesjs = false\n        }\n    }\n\n    _defaultStyleExists () {\n        return (typeof window.gonzalesjs !== 'undefined' && window.gonzalesjs === true)\n    }\n\n    _mousemove (x, y) {\n        this.posX = x\n        this.posY = y\n        this.node.style.left = this.posX + 'px'\n        this.node.style.top = this.posY + 'px'\n    }\n\n    _bindEvents () {\n        this.mousemove = this._throttle((event) => {\n            this._mousemove(event.clientX, event.clientY)\n        }, 2)\n\n        this.mousedown = () => {\n            this.emitter.emit('mousedown', this.el)\n        }\n\n        this.mouseup = () => {\n            this.emitter.emit('mouseup', this.el)\n        }\n\n        window.addEventListener('mousemove', this.mousemove, false)\n        window.addEventListener('mouseup', this.mouseup, false)\n        window.addEventListener('mousedown', this.mousedown, false)\n    }\n\n    _unbindEvents () {\n        window.removeEventListener('mousemove', this.mousemove, false)\n        window.removeEventListener('mouseup', this.mouseup, false)\n        window.removeEventListener('mousedown', this.mousedown, false)\n    }\n\n}\n\nexport default (...args) => { return new Gonzales(...args) }\n"],"names":["mitt","all","Object","create","type","handler","push","splice","indexOf","evt","map","Gonzales","selector","options","hideDefault","document","querySelector","el","this","cloneNode","parentNode","removeChild","emitter","node","defaultStyle","posX","posY","callback","delay","scope","last","timer","context","now","Date","args","arguments","setTimeout","apply","_showNode","_hideNode","_destroyNode","on","off","createElement","setAttribute","appendChild","body","_createNode","style","display","_bindEvents","_hideDefault","_unbindEvents","_showDefault","_defaultStyleExists","innerHTML","gonzalesjs","window","x","y","left","top","mousemove","_throttle","event","_mousemove","clientX","clientY","mousedown","emit","_this","mouseup","addEventListener","removeEventListener"],"mappings":";;;;;;;;;mLAeA,SAASA,GAAKC,YACPA,GAAOC,OAAOC,OAAO,UAUtB,SAAYC,EAAcC,IAC5BJ,EAAIG,KAAUH,EAAIG,QAAaE,KAAKD,QAUjC,SAAaD,EAAcC,GAC3BJ,EAAIG,MACHA,GAAMG,OAAON,EAAIG,GAAMI,QAAQH,KAAa,EAAG,SAY/C,SAAcD,EAAcK,IAChCR,EAAIG,QAAaM,IAAI,SAAUL,KAAmBI,MAClDR,EAAI,UAAYS,IAAI,SAAUL,KAAmBD,EAAMK,+VCnDrDE,wBAMWC,MAAUC,mFACdA,qBACYA,EAAQC,cAAe,QAGnCF,SAA+B,gBAAbA,GACjBG,SAASC,cAAcJ,GACvBA,OAEDK,GAAKC,KAAKN,SAASO,WAAU,QAE7BP,SAASQ,WAAWC,YAAYH,KAAKN,eAErCU,QAAUtB,SAEVuB,MAAO,OACPC,cAAe,OACfC,MAAO,UACPC,MAAO,KAELR,iDAOAS,EAAUC,EAAOC,MACpBC,UACAC,eAEG,eACCC,GAAUH,GAASX,KACnBe,GAAO,GAAIC,MACXC,EAAOC,SAEPN,IAAQG,EAAMH,EAAOF,gBACRG,KACLM,WAAW,aACRJ,IACEK,MAAMN,EAASG,IACzBP,OAEIK,IACEK,MAAMN,EAASG,6CAU3BI,sDAIAC,mDAIAC,gEAGkBnB,SAAQoB,wEACPpB,SAAQqB,6DAO3BzB,KAAKK,YACDA,KAAOR,SAAS6B,cAAc,YAC9BrB,KAAKsB,aAAa,QAAS,oDAAsD3B,KAAKO,KAAO,UAAYP,KAAKQ,KAAO,uJACrHH,KAAKuB,YAAY5B,KAAKD,aAClB8B,KAAKD,YAAY5B,KAAKK,mDAK9BiB,YAEDtB,KAAKK,YACAA,KAAKH,WAAWC,YAAYH,KAAKK,WACjCA,MAAO,4CAKXyB,cAED9B,KAAKK,YACAA,KAAK0B,MAAMC,QAAU,aACrBC,mBACAC,oDAKLlC,KAAKK,YACAA,KAAK0B,MAAMC,QAAU,YACrBG,qBACAC,uDAKLpC,KAAKL,QAAQC,cAAgBI,KAAKqC,6BAC7B/B,aAAeT,SAAS6B,cAAc,cACtCpB,aAAapB,KAAO,gBACpBoB,aAAagC,UAAY,yMACrBT,KAAKD,YAAY5B,KAAKM,qBACxBiC,YAAa,0CAKpBvC,KAAKM,oBACAA,aAAaJ,WAAWC,YAAYH,KAAKM,mBACzCA,cAAe,SACbiC,YAAa,uDAKa,mBAAtBC,QAAOD,YAA8BC,OAAOD,cAAe,qCAGlEE,EAAGC,QACNnC,KAAOkC,OACPjC,KAAOkC,OACPrC,KAAK0B,MAAMY,KAAO3C,KAAKO,KAAO,UAC9BF,KAAK0B,MAAMa,IAAM5C,KAAKQ,KAAO,2DAI7BqC,UAAY7C,KAAK8C,UAAU,SAACC,KACxBC,WAAWD,EAAME,QAASF,EAAMG,UACtC,QAEEC,UAAY,aACR/C,QAAQgD,KAAK,YAAaC,EAAKtD,UAGnCuD,QAAU,aACNlD,QAAQgD,KAAK,UAAWC,EAAKtD,YAG/BwD,iBAAiB,YAAavD,KAAK6C,WAAW,UAC9CU,iBAAiB,UAAWvD,KAAKsD,SAAS,UAC1CC,iBAAiB,YAAavD,KAAKmD,WAAW,kDAI9CK,oBAAoB,YAAaxD,KAAK6C,WAAW,UACjDW,oBAAoB,UAAWxD,KAAKsD,SAAS,UAC7CE,oBAAoB,YAAaxD,KAAKmD,WAAW,cAKjD,sCAAIlC,kFAAsBxB,gBAAYwB"}