/*!
* gonzales.js 1.0.0 - Speedy JS library for custom mouse pointers.
*
* @author       maoosi <hello@sylvainsimao.fr>
* @homepage     https://github.com/maoosi/gonzales.js#readme
* @copyright    Copyright (c) 2017 maoosi <hello@sylvainsimao.fr>
* @license      MIT
* @version      1.0.0
*/
function mitt(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).map(function(e){e(n)}),(e["*"]||[]).map(function(e){e(t,n)})}}}var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),Gonzales=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return classCallCheck(this,e),this.options={hideDefault:n.hideDefault||!0},this.selector="string"==typeof t?document.querySelector(t):t,this.el=this.selector.cloneNode(!0),this.selector.parentNode.removeChild(this.selector),this.emitter=mitt(),this.node=!1,this.defaultStyle=!1,this.posX=-9999,this.posY=-9999,this}return createClass(e,[{key:"_throttle",value:function(e,t,n){var o=void 0,i=void 0;return function(){var s=n||this,u=+new Date,l=arguments;o&&u<o+t?(clearTimeout(i),i=setTimeout(function(){o=u,e.apply(s,l)},t)):(o=u,e.apply(s,l))}}},{key:"activate",value:function(){this._showNode()}},{key:"deactivate",value:function(){this._hideNode()}},{key:"destroy",value:function(){this._destroyNode()}},{key:"on",value:function(){var e;return(e=this.emitter).on.apply(e,arguments)}},{key:"off",value:function(){var e;return(e=this.emitter).off.apply(e,arguments)}},{key:"_createNode",value:function(){this.node||(this.node=document.createElement("div"),this.node.setAttribute("style","display:none;position:absolute;z-index:9999;left:"+this.posX+"px;top:"+this.posY+"px;width:0;height:0;overflow:visible;pointer-events:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;"),this.node.appendChild(this.el),document.body.appendChild(this.node))}},{key:"_destroyNode",value:function(){this._hideNode(),this.node&&(this.node.parentNode.removeChild(this.node),this.node=!1)}},{key:"_showNode",value:function(){this._createNode(),this.node&&(this.node.style.display="block",this._bindEvents(),this._hideDefault())}},{key:"_hideNode",value:function(){this.node&&(this.node.style.display="none",this._unbindEvents(),this._showDefault())}},{key:"_hideDefault",value:function(){this.options.hideDefault&&!this._defaultStyleExists()&&(this.defaultStyle=document.createElement("style"),this.defaultStyle.type="text/css",this.defaultStyle.innerHTML='* { cursor: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII="), auto !important; }',document.body.appendChild(this.defaultStyle),window.gonzalesjs=!0)}},{key:"_showDefault",value:function(){this.defaultStyle&&(this.defaultStyle.parentNode.removeChild(this.defaultStyle),this.defaultStyle=!1,window.gonzalesjs=!1)}},{key:"_defaultStyleExists",value:function(){return"undefined"!=typeof window.gonzalesjs&&window.gonzalesjs===!0}},{key:"_mousemove",value:function(e,t){this.posX=e,this.posY=t,this.node.style.left=this.posX+"px",this.node.style.top=this.posY+"px"}},{key:"_bindEvents",value:function(){var e=this;this.mousemove=this._throttle(function(t){e._mousemove(t.clientX,t.clientY)},2),this.mousedown=function(){e.emitter.emit("mousedown",e.el)},this.mouseup=function(){e.emitter.emit("mouseup",e.el)},window.addEventListener("mousemove",this.mousemove,!1),window.addEventListener("mouseup",this.mouseup,!1),window.addEventListener("mousedown",this.mousedown,!1)}},{key:"_unbindEvents",value:function(){window.removeEventListener("mousemove",this.mousemove,!1),window.removeEventListener("mouseup",this.mouseup,!1),window.removeEventListener("mousedown",this.mousedown,!1)}}]),e}(),gonzales=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(Gonzales,[null].concat(t)))};export default gonzales;
//# sourceMappingURL=gonzales.mjs.map
